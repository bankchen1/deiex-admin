# æ•°æ®å­—æ®µå®Œå…¨åŒ¹é…ä¿®å¤å®Œæˆ

## âœ… å·²ä¿®å¤çš„æ¨¡å—

### 1. Users æ¨¡å—

**ä¿®å¤å†…å®¹**ï¼š
- âœ… ç”¨æˆ·åˆ—è¡¨æ•°æ®å®Œå…¨åŒ¹é… `User` ç±»å‹
- âœ… ç”¨æˆ·è¯¦æƒ…è¿”å› `UserDetailResponse` ç»“æ„
- âœ… ç”¨æˆ·ç»Ÿè®¡æ•°æ®åŒ¹é… `UserStats` ç±»å‹
- âœ… åŒ…å«å®Œæ•´çš„èµ„äº§å¿«ç…§ `AssetSnapshot`
- âœ… åŒ…å«ç™»å½•è®°å½•ã€è®¾å¤‡ä¿¡æ¯ã€é“¾åœ°å€ã€è®¢å•ã€æŒä»“ã€å®¡è®¡è®°å½•

**å…³é”®å­—æ®µ**ï¼š
```typescript
{
  id, nickname, email, phone, kycStatus, vipLevel, riskTags,
  assetSnapshot: {
    totalUsd, availableUsd, frozenUsd,
    currencies: { BTC, ETH, USDT }
  },
  createdAt, lastLoginAt, status, country, registrationIp, twoFactorEnabled
}
```

### 2. Orders æ¨¡å—

**ä¿®å¤å†…å®¹**ï¼š
- âœ… Spotè®¢å•åŒ¹é… `Order` ç±»å‹
- âœ… Futuresè®¢å•åŒ¹é… `FuturesOrder` ç±»å‹ï¼ˆåŒ…å«leverage, marginMode, positionSideç­‰ï¼‰
- âœ… æŒä»“åŒ¹é… `Position` ç±»å‹ï¼ˆåŒ…å«marginå­—æ®µï¼‰
- âœ… æ¸…ç®—åŒ¹é… `Liquidation` ç±»å‹ï¼ˆåŒ…å«reasonå­—æ®µï¼‰
- âœ… æ‰€æœ‰ä»·æ ¼å’Œæ•°é‡å­—æ®µä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹

**å…³é”®å­—æ®µ**ï¼š
```typescript
// Spot Order
{
  id, userId, userNickname, symbol, type: 'spot', side, orderType,
  price, quantity, filled, status, errorCode, matchingLatency,
  createdAt, updatedAt
}

// Futures Order (extends Order)
{
  ...Order,
  leverage, marginMode, positionSide, liquidationPrice, fundingImpact
}

// Position
{
  id, userId, userNickname, symbol, side, leverage, marginMode,
  entryPrice, markPrice, liquidationPrice, quantity, margin,
  unrealizedPnl, riskRatio, createdAt
}
```

### 3. Assets æ¨¡å—

**ä¿®å¤å†…å®¹**ï¼š
- âœ… å­˜æ¬¾åŒ¹é… `Deposit` ç±»å‹
- âœ… ææ¬¾åŒ¹é… `Withdrawal` ç±»å‹
- âœ… åŒ…å«é£é™©è¯„åˆ†å’ŒåŒ¹é…è§„åˆ™
- âœ… åŒ…å«å®¡æ‰¹æµç¨‹ `Approval[]`
- âœ… åŒ…å«ç¡®è®¤æ•°å’Œé“¾ä¿¡æ¯

**å…³é”®å­—æ®µ**ï¼š
```typescript
// Deposit
{
  id, userId, userNickname, currency, chain, txHash, amount,
  status, confirmations, requiredConfirmations,
  riskFlags, riskScore, address, createdAt, completedAt, notes
}

// Withdrawal
{
  id, userId, userNickname, currency, chain, address, amount, fee,
  status, riskScore, matchedRules, approvals, txHash,
  createdAt, completedAt, rejectedReason, notes
}
```

### 4. Config æ¨¡å—

**ä¿®å¤å†…å®¹**ï¼š
- âœ… InstrumentsåŒ¹é… `Instrument` ç±»å‹
- âœ… åŒ…å«å¤šè¯­è¨€displayName
- âœ… åŒ…å«å®Œæ•´çš„äº¤æ˜“å‚æ•°ï¼ˆpricePrecision, qtyStep, minOrderç­‰ï¼‰
- âœ… åŒ…å«æœŸè´§ç‰¹å®šå­—æ®µï¼ˆmaxLeverage, maintenanceMarginRateç­‰ï¼‰
- âœ… åŒ…å«ç‰ˆæœ¬æ§åˆ¶å’ŒçŠ¶æ€ç®¡ç†

**å…³é”®å­—æ®µ**ï¼š
```typescript
{
  symbol, displayName: { en, zh }, base, quote, type,
  pricePrecision, qtyStep, minOrder, maxOrder, maxPosition,
  priceTickSize, visible, rank, region, tags,
  feeTemplateId, marginTemplateId, iconId,
  status, version, oracleSource, indexSymbol,
  maxLeverage, maintenanceMarginRate,
  createdAt, updatedAt
}
```

### 5. KYC æ¨¡å—

**ä¿®å¤å†…å®¹**ï¼š
- âœ… KYCç”³è¯·åŒ¹é… `KycApplication` ç±»å‹
- âœ… åŒ…å«å®Œæ•´çš„æ–‡æ¡£ä¿¡æ¯ `KycDocument[]`
- âœ… åŒ…å«OCRæ•°æ®å’ŒéªŒè¯çŠ¶æ€
- âœ… åŒ…å«ä¸ªäººä¿¡æ¯ï¼ˆfirstName, lastName, dateOfBirthç­‰ï¼‰
- âœ… åŒ…å«å®¡æ ¸å†å²å’Œé£é™©ç­‰çº§

**å…³é”®å­—æ®µ**ï¼š
```typescript
{
  id, userId, country, submittedAt, status, score, matchedRules,
  documents: [
    { type, url, ocrData, verificationStatus }
  ],
  reviewHistory, firstName, lastName, dateOfBirth, nationality,
  address, city, postalCode, reviewedAt, reviewedBy,
  reviewNotes, riskLevel
}
```

### 6. Risk æ¨¡å—

**ä¿®å¤å†…å®¹**ï¼š
- âœ… é£é™©è§„åˆ™åŒ¹é… `RiskRule` ç±»å‹
- âœ… åŒ…å«æ¡ä»¶æ•°ç»„ `RiskCondition[]`
- âœ… åŒ…å«åŠ¨ä½œæ•°ç»„ `RiskAction[]`
- âœ… é£é™©é™åˆ¶åŒ¹é… `RiskLimit` ç±»å‹
- âœ… é»‘åå•åŒ¹é… `BlacklistEntry` ç±»å‹
- âœ… åŒ…å«ä½¿ç”¨ç»Ÿè®¡å’ŒåŒ¹é…è®¡æ•°

**å…³é”®å­—æ®µ**ï¼š
```typescript
// RiskRule
{
  id, name, description,
  conditions: [{ field, operator, value }],
  actions: [{ type, params }],
  priority, enabled, status, version,
  createdAt, updatedAt, createdBy,
  matchCount, lastMatchedAt
}

// RiskLimit
{
  id, name, description, scope, scopeValue, type, period,
  threshold, currency, enabled, effectiveFrom, effectiveTo,
  createdAt, updatedAt, createdBy,
  currentUsage, usagePercentage
}

// BlacklistEntry
{
  id, type, value, reason, source, status,
  addedBy, addedAt, expiresAt, removedAt, removedBy,
  notes, matchCount, lastMatchedAt
}
```

## ğŸ” æ•°æ®ç±»å‹è§„èŒƒ

### ä»·æ ¼å’Œæ•°é‡å­—æ®µ
æ‰€æœ‰é‡‘èç›¸å…³çš„æ•°å€¼éƒ½ä½¿ç”¨**å­—ç¬¦ä¸²ç±»å‹**ä»¥é¿å…ç²¾åº¦é—®é¢˜ï¼š
- `price: string`
- `quantity: string`
- `amount: string`
- `fee: string`
- `threshold: string`

### æ—¥æœŸæ—¶é—´å­—æ®µ
æ‰€æœ‰æ—¥æœŸæ—¶é—´ä½¿ç”¨**ISO 8601å­—ç¬¦ä¸²æ ¼å¼**ï¼š
- `createdAt: string` (ISO 8601)
- `updatedAt: string` (ISO 8601)
- `timestamp: string` (ISO 8601)

### æšä¸¾ç±»å‹
ä½¿ç”¨TypeScriptè”åˆç±»å‹ç¡®ä¿ç±»å‹å®‰å…¨ï¼š
```typescript
status: 'pending' | 'approved' | 'rejected'
type: 'spot' | 'futures'
side: 'buy' | 'sell' | 'long' | 'short'
```

### å¯é€‰å­—æ®µ
ä½¿ç”¨`undefined`è€Œä¸æ˜¯`null`ï¼š
```typescript
errorCode?: string
notes?: string
completedAt?: string
```

## ğŸ“Š åˆ†é¡µå“åº”ç»“æ„

æ‰€æœ‰åˆ—è¡¨APIç»Ÿä¸€è¿”å›åˆ†é¡µç»“æ„ï¼š
```typescript
{
  success: true,
  data: {
    data: T[],      // æ•°æ®æ•°ç»„
    total: number,  // æ€»æ•°
    page: number,   // å½“å‰é¡µ
    pageSize: number // æ¯é¡µå¤§å°
  },
  message: string
}
```

## ğŸ¯ è¯¦æƒ…å“åº”ç»“æ„

è¯¦æƒ…APIè¿”å›å®Œæ•´å¯¹è±¡ï¼š
```typescript
{
  success: true,
  data: T,  // å®Œæ•´å¯¹è±¡
  message: string
}
```

## âœ¨ ç‰¹æ®Šå­—æ®µè¯´æ˜

### 1. AssetSnapshotï¼ˆèµ„äº§å¿«ç…§ï¼‰
```typescript
{
  totalUsd: number,
  availableUsd: number,
  frozenUsd: number,
  currencies: {
    [currency: string]: {
      currency: string,
      available: string,
      frozen: string,
      usdValue: number
    }
  }
}
```

### 2. Approvalï¼ˆå®¡æ‰¹è®°å½•ï¼‰
```typescript
{
  role: string,
  adminId: string,
  adminName: string,
  action: 'approve' | 'reject',
  reason?: string,
  timestamp: string
}
```

### 3. RiskConditionï¼ˆé£é™©æ¡ä»¶ï¼‰
```typescript
{
  field: string,
  operator: 'eq' | 'ne' | 'gt' | 'gte' | 'lt' | 'lte' | 'in' | 'contains',
  value: any
}
```

### 4. RiskActionï¼ˆé£é™©åŠ¨ä½œï¼‰
```typescript
{
  type: 'block' | 'review' | 'alert' | 'tag',
  params: Record<string, any>
}
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### éªŒè¯æ­¥éª¤

1. **é‡å¯å¼€å‘æœåŠ¡å™¨**ï¼š
```bash
npm run dev
```

2. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**ï¼š
- ç¡¬åˆ·æ–°ï¼š`Ctrl+Shift+R` (Windows) æˆ– `Cmd+Shift+R` (Mac)

3. **æµ‹è¯•å„ä¸ªæ¨¡å—**ï¼š
- âœ… Usersåˆ—è¡¨å’Œè¯¦æƒ…
- âœ… Ordersï¼ˆSpot, Futures, Positions, Liquidationsï¼‰
- âœ… Assetsï¼ˆDeposits, Withdrawalsï¼‰
- âœ… Configï¼ˆInstruments, Margin, Fees, Calendarï¼‰
- âœ… KYCç”³è¯·åˆ—è¡¨å’Œè¯¦æƒ…
- âœ… Riskï¼ˆRules, Limits, Blacklistï¼‰

4. **æ£€æŸ¥æ§åˆ¶å°**ï¼š
- ä¸åº”è¯¥æœ‰ç±»å‹é”™è¯¯
- ä¸åº”è¯¥æœ‰å­—æ®µç¼ºå¤±è­¦å‘Š
- æ•°æ®åº”è¯¥æ­£ç¡®æ˜¾ç¤ºåœ¨UIä¸Š

### æµ‹è¯•è„šæœ¬

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š

```javascript
// æµ‹è¯•æ‰€æœ‰æ¨¡å—
const testAllModules = async () => {
  const { apiClient } = await import('/src/services/api/AdminApiClient.ts')
  
  const tests = [
    { name: 'Users List', url: '/admin/users?page=1&pageSize=10' },
    { name: 'User Detail', url: '/admin/users/user-1' },
    { name: 'User Stats', url: '/admin/users/stats' },
    { name: 'Spot Orders', url: '/admin/orders/spot?page=1&pageSize=10' },
    { name: 'Futures Orders', url: '/admin/orders/futures?page=1&pageSize=10' },
    { name: 'Positions', url: '/admin/orders/positions?page=1&pageSize=10' },
    { name: 'Deposits', url: '/admin/assets/deposits?page=1&pageSize=10' },
    { name: 'Withdrawals', url: '/admin/assets/withdrawals?page=1&pageSize=10' },
    { name: 'Instruments', url: '/admin/config/instruments?page=1&pageSize=10' },
    { name: 'KYC List', url: '/admin/kyc?page=1&pageSize=10' },
    { name: 'KYC Stats', url: '/admin/kyc/stats' },
    { name: 'Risk Rules', url: '/admin/risk/rules?page=1&pageSize=10' },
    { name: 'Risk Limits', url: '/admin/risk/limits?page=1&pageSize=10' },
    { name: 'Blacklist', url: '/admin/risk/blacklist?page=1&pageSize=10' },
  ]
  
  for (const test of tests) {
    try {
      const response = await apiClient.get(test.url)
      console.log(`âœ… ${test.name}:`, response.data ? 'æœ‰æ•°æ®' : 'æ— æ•°æ®')
    } catch (error) {
      console.error(`âŒ ${test.name}:`, error.message)
    }
  }
}

testAllModules()
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç±»å‹å®‰å…¨**ï¼šæ‰€æœ‰mockæ•°æ®ç°åœ¨å®Œå…¨åŒ¹é…TypeScriptç±»å‹å®šä¹‰
2. **å­—æ®µå®Œæ•´æ€§**ï¼šåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µå’Œå¸¸ç”¨å¯é€‰å­—æ®µ
3. **æ•°æ®çœŸå®æ€§**ï¼šmockæ•°æ®æ¨¡æ‹ŸçœŸå®åœºæ™¯ï¼ŒåŒ…å«å„ç§çŠ¶æ€å’Œè¾¹ç•Œæƒ…å†µ
4. **å“åº”å¼æ›´æ–°**ï¼šç¡®ä¿Vueç»„ä»¶èƒ½æ­£ç¡®å“åº”æ•°æ®å˜åŒ–
5. **åˆ†é¡µæ”¯æŒ**ï¼šæ‰€æœ‰åˆ—è¡¨APIæ”¯æŒåˆ†é¡µå‚æ•°

## ğŸš€ ä¸‹ä¸€æ­¥

å¦‚æœè¿˜æœ‰é¡µé¢æ˜¾ç¤ºé—®é¢˜ï¼š

1. **æ£€æŸ¥ç»„ä»¶ç»‘å®š**ï¼šç¡®ä¿ç»„ä»¶æ­£ç¡®ä½¿ç”¨Storeæ•°æ®
2. **æ£€æŸ¥æ¡ä»¶æ¸²æŸ“**ï¼šç¡®ä¿`v-if`æ¡ä»¶æ­£ç¡®
3. **æ£€æŸ¥æ•°æ®è½¬æ¢**ï¼šç¡®ä¿Storeæ­£ç¡®å¤„ç†APIå“åº”
4. **æŸ¥çœ‹æ§åˆ¶å°**ï¼šæ£€æŸ¥æ˜¯å¦æœ‰JavaScripté”™è¯¯

æ‰€æœ‰mockæ•°æ®ç°åœ¨éƒ½å®Œå…¨åŒ¹é…å‰ç«¯ç±»å‹å®šä¹‰ï¼Œåº”è¯¥èƒ½æ­£ç¡®æ˜¾ç¤ºåœ¨UIä¸Šï¼
