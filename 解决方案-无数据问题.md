# è§£å†³"æ— æ•°æ®"é—®é¢˜

## é—®é¢˜åˆ†æ

### 1. Pages vs Modals - ä¸æ˜¯é‡å¤ï¼

**Pages** (74ä¸ªæ–‡ä»¶)ï¼š
- å®Œæ•´çš„é¡µé¢ç»„ä»¶
- ç”¨äºè·¯ç”±å¯¼èˆª
- ä¾‹å¦‚ï¼š`pages/kyc/index.vue` - KYCåˆ—è¡¨é¡µé¢

**Modals** (49ä¸ªæ–‡ä»¶)ï¼š
- å¼¹çª—/å¯¹è¯æ¡†ç»„ä»¶
- åœ¨é¡µé¢ä¸­å¼¹å‡ºä½¿ç”¨
- ä¾‹å¦‚ï¼š`modals/kyc/ReviewDrawer.vue` - KYCå®¡æ ¸æŠ½å±‰

**ç»“è®º**ï¼šè¿™æ˜¯æ­£å¸¸çš„æ¶æ„è®¾è®¡ï¼Œä¸éœ€è¦åˆ é™¤ä»»ä½•æ–‡ä»¶ã€‚

### 2. Mockæ•°æ®é—®é¢˜

#### å¯èƒ½çš„åŸå› 

1. **TypeScriptç¼–è¯‘é”™è¯¯** - é˜»æ­¢äº†mockæœåŠ¡åŠ è½½
2. **MockæœåŠ¡æœªæ­£ç¡®åˆå§‹åŒ–** - æ‹¦æˆªå™¨æ²¡æœ‰è®¾ç½®
3. **æ•°æ®ç»“æ„ä¸åŒ¹é…** - ç»„ä»¶æœŸæœ›çš„æ ¼å¼å’Œmockè¿”å›çš„ä¸åŒ
4. **è·¯ç”±åŒ¹é…é—®é¢˜** - URLæ²¡æœ‰æ­£ç¡®åŒ¹é…åˆ°mockå¤„ç†å™¨

## è§£å†³æ­¥éª¤

### æ­¥éª¤1ï¼šé‡å¯å¼€å‘æœåŠ¡å™¨

```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ (Ctrl+C)
# æ¸…é™¤ç¼“å­˜å¹¶é‡å¯
rm -rf node_modules/.vite
npm run dev
```

### æ­¥éª¤2ï¼šæ£€æŸ¥ç¯å¢ƒå˜é‡

ç¡®è®¤ `.env.development` æ–‡ä»¶ï¼š
```bash
VITE_USE_MOCK=true
```

### æ­¥éª¤3ï¼šç¡¬åˆ·æ–°æµè§ˆå™¨

- Chrome/Edge: `Ctrl+Shift+R` (Windows) æˆ– `Cmd+Shift+R` (Mac)
- æˆ–è€…æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œå³é”®åˆ·æ–°æŒ‰é’®ï¼Œé€‰æ‹©"æ¸…ç©ºç¼“å­˜å¹¶ç¡¬æ€§é‡æ–°åŠ è½½"

### æ­¥éª¤4ï¼šæ£€æŸ¥æ§åˆ¶å°

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
ğŸ­ MOCK MODE ACTIVE
Mock mode is active. All API calls return mock data.
```

å¦‚æœæ²¡æœ‰çœ‹åˆ°ï¼Œè¯´æ˜mockæ¨¡å¼æ²¡æœ‰å¯ç”¨ã€‚

### æ­¥éª¤5ï¼šæµ‹è¯•APIè°ƒç”¨

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š

```javascript
// æµ‹è¯•1ï¼šæ£€æŸ¥mockæ¨¡å¼
console.log('Mock mode:', import.meta.env.VITE_USE_MOCK)

// æµ‹è¯•2ï¼šç›´æ¥è°ƒç”¨API
const testApi = async () => {
  try {
    const { apiClient } = await import('/src/services/api/AdminApiClient.ts')
    const response = await apiClient.get('/admin/dashboard/stats')
    console.log('âœ… Response:', response)
    return response
  } catch (error) {
    console.error('âŒ Error:', error)
    return null
  }
}
testApi()
```

### æ­¥éª¤6ï¼šæ£€æŸ¥å“åº”æ•°æ®

å¦‚æœAPIè°ƒç”¨æˆåŠŸä½†é¡µé¢æ²¡æœ‰æ•°æ®ï¼Œæ£€æŸ¥æ•°æ®ç»“æ„ï¼š

```javascript
// æ£€æŸ¥dashboard store
const checkStore = async () => {
  const { useDashboardStore } = await import('/src/stores/dashboard.ts')
  const store = useDashboardStore()
  
  console.log('Before fetch:')
  console.log('- Stats:', store.stats)
  console.log('- Loading:', store.statsLoading)
  console.log('- Error:', store.error)
  
  await store.fetchStats()
  
  console.log('After fetch:')
  console.log('- Stats:', store.stats)
  console.log('- Loading:', store.statsLoading)
  console.log('- Error:', store.error)
  
  if (store.stats) {
    console.log('âœ… Data loaded successfully!')
    console.log('Registrations:', store.stats.registrations)
    console.log('Active Users:', store.stats.activeUsers)
  } else {
    console.error('âŒ No data loaded')
  }
}
checkStore()
```

## å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šæ§åˆ¶å°æ˜¾ç¤ºTypeScripté”™è¯¯

**ç—‡çŠ¶**ï¼š
```
Cannot find module './modules/users'
```

**è§£å†³**ï¼š
1. é‡å¯å¼€å‘æœåŠ¡å™¨
2. åˆ é™¤ `node_modules/.vite` ç¼“å­˜
3. å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¿è¡Œ `npm install`

### é—®é¢˜2ï¼šçœ‹åˆ°"Mock response (default)"

**ç—‡çŠ¶**ï¼šæ§åˆ¶å°æ˜¾ç¤ºé»˜è®¤å“åº”è€Œä¸æ˜¯å…·ä½“æ•°æ®

**åŸå› **ï¼šURLæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•å¤„ç†å™¨

**è§£å†³**ï¼š
1. æ£€æŸ¥URLæ ¼å¼
2. ç¡®è®¤mockæœåŠ¡ä¸­çš„URLåŒ¹é…é€»è¾‘
3. æŸ¥çœ‹æ§åˆ¶å°çš„URLæ—¥å¿—

### é—®é¢˜3ï¼šæ•°æ®åŠ è½½ä½†é¡µé¢ä¸æ˜¾ç¤º

**ç—‡çŠ¶**ï¼šæ§åˆ¶å°æ˜¾ç¤ºæ•°æ®ï¼Œä½†é¡µé¢æ˜¾ç¤º"No Data"

**åŸå› **ï¼šç»„ä»¶æœŸæœ›çš„æ•°æ®æ ¼å¼ä¸åŒ¹é…

**è§£å†³**ï¼š
1. æ£€æŸ¥ç»„ä»¶çš„propsç±»å‹
2. å¯¹æ¯”mockè¿”å›çš„æ•°æ®ç»“æ„
3. æŸ¥çœ‹ç»„ä»¶çš„v-ifæ¡ä»¶

### é—®é¢˜4ï¼šé¡µé¢ä¸€ç›´æ˜¾ç¤ºLoading

**ç—‡çŠ¶**ï¼šé¡µé¢æ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼Œæ°¸ä¸ç»“æŸ

**åŸå› **ï¼š
- APIè°ƒç”¨å¤±è´¥
- Promiseæ²¡æœ‰resolve
- LoadingçŠ¶æ€æ²¡æœ‰é‡ç½®

**è§£å†³**ï¼š
```javascript
// æ£€æŸ¥loadingçŠ¶æ€
const { useDashboardStore } = await import('/src/stores/dashboard.ts')
const store = useDashboardStore()
console.log('Loading:', store.statsLoading)
console.log('Error:', store.error)
```

## è°ƒè¯•æŠ€å·§

### æŠ€å·§1ï¼šæ·»åŠ ä¸´æ—¶æ—¥å¿—

åœ¨ `src/stores/dashboard.ts` çš„ `fetchStats` æ–¹æ³•ä¸­ï¼š

```typescript
async function fetchStats(params?: DashboardQueryParams) {
  console.log('[Dashboard Store] Fetching stats...')
  statsLoading.value = true
  error.value = null
  try {
    const response = await dashboardApi.getStats(params)
    console.log('[Dashboard Store] Response:', response)
    console.log('[Dashboard Store] Response.data:', response.data)
    stats.value = response.data
    console.log('[Dashboard Store] Stats set to:', stats.value)
    return response
  } catch (e: any) {
    console.error('[Dashboard Store] Error:', e)
    error.value = e.message || 'Failed to fetch dashboard stats'
    throw e
  } finally {
    statsLoading.value = false
    console.log('[Dashboard Store] Loading complete')
  }
}
```

### æŠ€å·§2ï¼šä½¿ç”¨Vue DevTools

1. å®‰è£…Vue DevToolsæµè§ˆå™¨æ‰©å±•
2. æ‰“å¼€DevTools
3. æŸ¥çœ‹Pinia storesçš„çŠ¶æ€
4. æ£€æŸ¥dashboard storeçš„æ•°æ®

### æŠ€å·§3ï¼šNetworkæ ‡ç­¾

è™½ç„¶è¯·æ±‚è¢«mockæ‹¦æˆªï¼Œä½†ä»ç„¶å¯ä»¥åœ¨Networkæ ‡ç­¾çœ‹åˆ°ï¼š
1. è¯·æ±‚æ˜¯å¦è¢«å‘èµ·
2. è¯·æ±‚çš„URLå’Œå‚æ•°
3. å“åº”çŠ¶æ€ï¼ˆå¯èƒ½æ˜¾ç¤ºä¸ºå–æ¶ˆæˆ–é”™è¯¯ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼‰

## å¿«é€Ÿä¿®å¤è„šæœ¬

å¦‚æœä¸€åˆ‡éƒ½ä¸å·¥ä½œï¼Œå°è¯•è¿™ä¸ªå®Œæ•´çš„é‡ç½®ï¼š

```bash
# 1. åœæ­¢å¼€å‘æœåŠ¡å™¨ (Ctrl+C)

# 2. æ¸…é™¤æ‰€æœ‰ç¼“å­˜
rm -rf node_modules/.vite
rm -rf dist

# 3. ç¡®è®¤ç¯å¢ƒå˜é‡
echo "VITE_USE_MOCK=true" >> .env.development

# 4. é‡å¯
npm run dev
```

ç„¶ååœ¨æµè§ˆå™¨ä¸­ï¼š
1. æ¸…é™¤æ‰€æœ‰ç¼“å­˜å’ŒCookie
2. ç¡¬åˆ·æ–°ï¼ˆCtrl+Shift+Rï¼‰
3. é‡æ–°ç™»å½•

## é¢„æœŸçš„æ­£å¸¸è¡Œä¸º

### æ§åˆ¶å°æ—¥å¿—
```
ğŸ­ MOCK MODE ACTIVE
Mock mode is active. All API calls return mock data.
[Mock Service] POST /auth/login
[Mock Service] Config: {...}
[Mock Service] Response: { success: true, data: {...}, message: '...' }
[Mock Service] GET /admin/dashboard/stats
[Mock Service] Config: {...}
[Mock Service] Response: { success: true, data: {...}, message: '...' }
```

### Dashboardæ˜¾ç¤º
- âœ… 6ä¸ªç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºæ•°å­—
- âœ… 4ä¸ªå¾…åŠäº‹é¡¹åˆ—è¡¨æœ‰å†…å®¹
- âœ… æ— çº¢è‰²é”™è¯¯
- âœ… æ•°æ®åœ¨1-2ç§’å†…åŠ è½½å®Œæˆ

### ç”¨æˆ·åˆ—è¡¨
- âœ… æ˜¾ç¤º50ä¸ªç”¨æˆ·
- âœ… åˆ†é¡µå·¥ä½œæ­£å¸¸
- âœ… å¯ä»¥ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

## å¦‚æœè¿˜æ˜¯ä¸å·¥ä½œ

å¦‚æœæŒ‰ç…§ä»¥ä¸Šæ­¥éª¤ä»ç„¶æ— æ³•è§£å†³ï¼Œè¯·ï¼š

1. **æˆªå›¾æ§åˆ¶å°**ï¼šåŒ…æ‹¬æ‰€æœ‰æ—¥å¿—å’Œé”™è¯¯
2. **æˆªå›¾Networkæ ‡ç­¾**ï¼šæ˜¾ç¤ºAPIè¯·æ±‚
3. **æˆªå›¾é¡µé¢**ï¼šæ˜¾ç¤ºå®é™…çš„æ˜¾ç¤ºæ•ˆæœ
4. **æä¾›ç¯å¢ƒä¿¡æ¯**ï¼š
   - Nodeç‰ˆæœ¬ï¼š`node -v`
   - NPMç‰ˆæœ¬ï¼š`npm -v`
   - æµè§ˆå™¨ç‰ˆæœ¬
   - æ“ä½œç³»ç»Ÿ

ç„¶åæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥è¯Šæ–­é—®é¢˜ã€‚

## ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

å¦‚æœmockæœåŠ¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ä¸´æ—¶ä½¿ç”¨è¿™ä¸ªç®€å•çš„ç‰ˆæœ¬ï¼š

åˆ›å»º `src/services/mock/simple.ts`ï¼š

```typescript
import type { AxiosInstance } from 'axios'

export function setupSimpleMock(axios: AxiosInstance) {
  axios.interceptors.request.use((config) => {
    console.log('[Simple Mock] Intercepting:', config.url)
    
    // è¿”å›ç®€å•çš„mockæ•°æ®
    return Promise.reject({
      config,
      response: {
        data: {
          success: true,
          data: { message: 'Simple mock data' },
          message: 'OK'
        },
        status: 200,
        statusText: 'OK',
        headers: {},
        config
      },
      __MOCK__: true
    })
  })
  
  axios.interceptors.response.use(
    (response) => response,
    (error) => {
      if (error.__MOCK__) {
        return Promise.resolve(error.response.data)
      }
      return Promise.reject(error)
    }
  )
}
```

ç„¶ååœ¨ `AdminApiClient.ts` ä¸­ä½¿ç”¨ï¼š

```typescript
import { setupSimpleMock } from '@/services/mock/simple'

// åœ¨constructorä¸­
if (import.meta.env.VITE_USE_MOCK === 'true') {
  setupSimpleMock(this.axiosInstance)
}
```

è¿™ä¸ªç®€å•ç‰ˆæœ¬å¯ä»¥å¸®åŠ©ç¡®è®¤æ‹¦æˆªå™¨æ˜¯å¦å·¥ä½œã€‚
