<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mock Service</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .success { background-color: #f0f9ff; border-color: #0ea5e9; }
        .error { background-color: #fef2f2; border-color: #ef4444; }
        button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 4px;
        }
        button:hover { background: #2563eb; }
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üé≠ Mock Service Test</h1>
    
    <div class="test-section">
        <h2>Instructions</h2>
        <ol>
            <li>Open your app in another tab: <a href="http://localhost:5173" target="_blank">http://localhost:5173</a></li>
            <li>Login with any credentials</li>
            <li>Open browser console (F12)</li>
            <li>Copy and paste the test scripts below</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>Test 1: Check Mock Mode</h2>
        <pre><code>// Should show: true
console.log('Mock mode:', import.meta.env.VITE_USE_MOCK)</code></pre>
    </div>

    <div class="test-section">
        <h2>Test 2: Test Dashboard Stats</h2>
        <pre><code>// Test dashboard stats API
const testDashboardStats = async () => {
  const { dashboardApi } = await import('/src/services/api/dashboard.ts')
  try {
    const response = await dashboardApi.getStats()
    console.log('‚úÖ Dashboard Stats Response:', response)
    console.log('Data:', response.data)
    return response
  } catch (error) {
    console.error('‚ùå Error:', error)
    return null
  }
}

testDashboardStats()</code></pre>
    </div>

    <div class="test-section">
        <h2>Test 3: Test Dashboard Store</h2>
        <pre><code>// Test dashboard store
const testDashboardStore = async () => {
  const { useDashboardStore } = await import('/src/stores/dashboard.ts')
  const store = useDashboardStore()
  
  console.log('Before fetch:')
  console.log('- Stats:', store.stats)
  console.log('- Loading:', store.statsLoading)
  
  await store.fetchStats()
  
  console.log('After fetch:')
  console.log('- Stats:', store.stats)
  console.log('- Loading:', store.statsLoading)
  console.log('- Error:', store.error)
  
  return store.stats
}

testDashboardStore()</code></pre>
    </div>

    <div class="test-section">
        <h2>Test 4: Test Users API</h2>
        <pre><code>// Test users API
const testUsersApi = async () => {
  const { usersApi } = await import('/src/services/api/users.ts')
  try {
    const response = await usersApi.getList({ page: 1, pageSize: 10 })
    console.log('‚úÖ Users Response:', response)
    console.log('Items:', response.data.items)
    console.log('Total:', response.data.total)
    return response
  } catch (error) {
    console.error('‚ùå Error:', error)
    return null
  }
}

testUsersApi()</code></pre>
    </div>

    <div class="test-section">
        <h2>Test 5: Test All Dashboard APIs</h2>
        <pre><code>// Test all dashboard endpoints
const testAllDashboard = async () => {
  const { dashboardApi } = await import('/src/services/api/dashboard.ts')
  
  console.log('Testing Dashboard APIs...')
  
  try {
    const stats = await dashboardApi.getStats()
    console.log('‚úÖ Stats:', stats.data)
  } catch (e) {
    console.error('‚ùå Stats failed:', e)
  }
  
  try {
    const charts = await dashboardApi.getCharts()
    console.log('‚úÖ Charts:', charts.data)
  } catch (e) {
    console.error('‚ùå Charts failed:', e)
  }
  
  try {
    const alerts = await dashboardApi.getAlerts()
    console.log('‚úÖ Alerts:', alerts.data)
    console.log('Alert count:', alerts.data.length)
  } catch (e) {
    console.error('‚ùå Alerts failed:', e)
  }
}

testAllDashboard()</code></pre>
    </div>

    <div class="test-section">
        <h2>Test 6: Direct API Client Test</h2>
        <pre><code>// Direct test of API client
const testApiClient = async () => {
  const { apiClient } = await import('/src/services/api/AdminApiClient.ts')
  
  const tests = [
    '/admin/dashboard/stats',
    '/admin/dashboard/charts',
    '/admin/dashboard/alerts',
    '/admin/users',
    '/admin/kyc',
  ]
  
  for (const url of tests) {
    try {
      const response = await apiClient.get(url)
      console.log(`‚úÖ ${url}:`, response)
    } catch (error) {
      console.error(`‚ùå ${url}:`, error)
    }
  }
}

testApiClient()</code></pre>
    </div>

    <div class="test-section success">
        <h2>Expected Results</h2>
        <p>If everything is working correctly, you should see:</p>
        <ul>
            <li>‚úÖ All tests return data (not null or undefined)</li>
            <li>‚úÖ Console shows: <code>[Mock Service] GET /admin/...</code></li>
            <li>‚úÖ Response has <code>success: true</code></li>
            <li>‚úÖ Response has <code>data</code> field with actual data</li>
            <li>‚úÖ No red errors in console</li>
        </ul>
    </div>

    <div class="test-section error">
        <h2>Common Issues</h2>
        <ul>
            <li><strong>Module not found:</strong> Make sure you're running tests from the app page (localhost:5173)</li>
            <li><strong>Mock not active:</strong> Check <code>VITE_USE_MOCK=true</code> in .env.development</li>
            <li><strong>No data:</strong> Check mock service URL matching logic</li>
            <li><strong>Wrong structure:</strong> Verify mock response format matches API expectations</li>
        </ul>
    </div>
</body>
</html>
